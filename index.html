<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"/>
    <link rel="stylesheet" href="assets/css/style.css"/>
</head>
<body>

<div class="main_container">
    <div id="welcome">
        <div class="inner_block">
            <div class="block_container">
                <span class="choose">Rank</span>
                <div class="dropdown">
                    <div class="select">
                        <span id="rank">Select Rank</span>
                        <i class="fa fa-chevron-left"></i>
                    </div>
                    <ul class="dropdown-menu">
                        <li>10th gup</li>
                        <li>9th gup</li>
                        <li>8th gup</li>
                        <li>7th gup</li>
                        <li>6th gup</li>
                        <li>5th gup</li>
                        <li>4th gup</li>
                        <li>3th gup</li>
                        <li>2nd gup</li>
                        <li>1st gup</li>
                        <li>Cho Dan Bo</li>                        
                    </ul>
                </div>
            </div>
            <div class="block_container">
                <!-- // TBD: Clean -->
                <span class="choose">Practice Time</span>
                <div class="dropdown">
                    <div class="select">
                        <span id="practice_time">Practice Time</span>
                        <i class="fa fa-chevron-left"></i>
                    </div>
                    <ul class="dropdown-menu">
                        <li>1 Minutes</li>
                        <li>15 Minutes</li>
                        <li>30 Minutes</li> 
                        <li>60 Minutes</li> 
                        <li>90 Minutes</li>                      
                    </ul>
                </div>
            </div>
            <div class="block_container">
                <button disabled class="custom-btn btn-3" id="start_button"><span>Start / Shi Jak</span></button>
            </div>
        </div>
    </div>
    <div id="practice" style="display: none;">
        <div class="inner_block">
            <div class="block_container">
                <h4 class="page-title" id="technique_name"></h4>
                <h4 class="seconds-timer" id="technique_timer"></h4>
            </div>
            <h5 class="main-timer" id="main_timer"></h5>
            <h5 class="main-timer topbar-text" id="technique_rank"></h5>
        </div>
    </div>
    <div id="thankyou" style="display: none;">
        <div class="inner_block">
            <div class="block_container">
                <h4 class="thanks_text">Thank you for the practice.</h4>
            </div>
        </div>
    </div>
</div>


<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
        // Open & close dropdown menus
        $('.dropdown').click(function () {
           $(this).toggleClass('active');
           $(this).find('.dropdown-menu').slideToggle(300);
        });
        $('.dropdown').focusout(function () {
            $(this).removeClass('active');
            $(this).find('.dropdown-menu').slideUp(300);
        });
        $('.dropdown .dropdown-menu li').click(function () {
            // Set span in parent to value of current item
            var selected_text = $(this).text()
            $(this).parents('.dropdown').find('span').text(selected_text);
            var values_picked = $('#rank').text() !== 'Select Rank' && $('#practi—Åe_time').text() !== 'Practice Time';
            $('#start_button').prop('disabled', !values_picked);
        });
        $('#start_button').click(function (e) {
            e.preventDefault();
            $('#welcome').fadeOut(250);
            $('#practice').fadeIn(250);
            start_practice();
        });

        var techniques = [
            // 10-9 gup
            { "name": "Low Block / Ha Dan Makh Ki", "rank": "10 Gup", },
            { "name": "High Block / San Dan Makh Ki", "rank": "10 Gup", },
            { "name": "Inside To Outside Block / Ahneso Pahkuro Mahk Ki", "rank": "10 Gup", },
            { "name": "Outside To Inside Block / Pahkeso Ahnuro Mahk Ki", "rank": "10 Gup", },
            { "name": "Side Block", "rank": "10 Gup", },
            { "name": "Reinforced Block", "rank": "10 Gup", },
            { "name": "Center Punch / Choong Dan Kong Kyuck", "rank": "10 Gup", },
            { "name": "High Punch / San Dan Kong Kyuck", "rank": "10 Gup", },
            { "name": "Side Punch / Choong Dan  Hang Jin", "rank": "10 Gup", },
            { "name": "Front Kick / Ahp Cha Ki", "rank": "10 Gup", },
            { "name": "Round Kick / Tollyo Cha Ki", "rank": "10 Gup", },
            { "name": "Side Kick  / Yup Cha Ki", "rank": "10 Gup", },
            { "name": "Stepping Side Kick", "rank": "10 Gup", },
            { "name": "Axe Kick", "rank": "10 Gup", },
            { "name": "Sae Kye Hyung Il Bu", "rank": "10 Gup", },
            { "name": "Sae Kye Hyung E Bu", "rank": "9 Gup", },
            // ? Basic jumping

            // 8-7 gup
            { "name": "Center Knife Hand", "rank": "8 Gup", },
            { "name": "Low Knife Hand", "rank": "8 Gup", },
            { "name": "Spear hand punch", "rank": "8 Gup", },
            { "name": "Spinning Back Kick / Dwi Tollyo Cha Ki", "rank": "8 Gup", },
            { "name": "Crescent Kick", "rank": "8 Gup", },
            { "name": "Hook Kick", "rank": "8 Gup", },
            { "name": "Wheel Kick", "rank": "8 Gup", },
            { "name": "Yuk Soo", "rank": "8 Gup", },
            { "name": "Yuk Jin", "rank": "8 Gup", },
            { "name": "Sae Kye Hyung Sam Bu", "rank": "8 Gup", },
            { "name": "Pyung Ahn Cho Dan", "rank": "7 Gup", },            
            // ? All Basic jumping
            // ? Secondary basic hand techniques executed in fighter stance
            // ? Two hand combination

             // 6-5 gup
             // ? Two or three hand combination
             // ? All  jumping
            { "name": "Pyung Ahn E Dan", "rank": "6 Gup", },
            { "name": "Pyung Ahn Sam Dan", "rank": "5 Gup", }, 
            
            // 4-3 gup
            // ? Flying kick 
             { "name": "Flying kick", "rank": "4 Gup", },
             { "name": "Pyung Ahn Sah Dan", "rank": "4 Gup", },
             { "name": "Pyung Ahn Oh Dan", "rank": "3 Gup", }, 

            // 2-1 gup
            { "name": "Flying kick", "rank": "4 Gup", },
            { "name": "Bassai", "rank": "2 Gup", },
            { "name": "Bong Hyung Il Bu", "rank": "2 Gup", }, 
            { "name": "Hainhanchi Cho Dan", "rank": "1 Gup", },
            { "name": "Bong Hyung E Bu", "rank": "1 Gup", }, 
            // ? Multi combination
            // ? Double action

            // Cho Dan Bo
            { "name": "Sip Soo", "rank": "Cho Dan Bo", }, 
            
            
        ]

        practice_time = $('#practice_time');
        technique_name = $('#technique_name');
        technique_rank = $('#technique_rank');
        technique_timer = $('#technique_timer');
        main_timer = $('#main_timer');
        
        function update_timers_text(practice_time_left, technique_time_left) {
            $(technique_timer).text(technique_time_left + " Seconds Left");
            $(main_timer).text(Math.floor(practice_time_left / 60) + " Minutes "+practice_time_left % 60 + " Seconds Left")
        }

        function update_technique() {
            var random_technique = Math.floor(Math.random() * techniques.length)
            $(technique_name).text(techniques[random_technique].name);
            $(technique_rank).text(techniques[random_technique].rank);
        }

        function start_practice() {
            // Overal practice
            // TBD: Clean
            var practice_time_text = practice_time.text()
            var practice_time_left = parseInt(practice_time_text.replace('Minutes', '').trim()) * 60;            
            
            // Technique
            var technique_time_cap = 30;
            var technique_time_left = technique_time_cap;

            update_timers_text(practice_time_left, technique_time_left);
            update_technique();

            var secInterval = setInterval(function () {
                technique_time_left = technique_time_left - 1;
                practice_time_left = practice_time_left - 1;

                update_timers_text(practice_time_left, technique_time_left);

                if (technique_time_left == 0) {
                    technique_time_left = technique_time_cap;
                    update_technique();
                }

                if (practice_time_left == 0) {
                    // Finish practice
                    clearInterval(secInterval);
                    $('#practice').fadeOut(250);
                    $('#thankyou').fadeIn(250);                    
                }
                
            }, 1000);
        }
    })
</script>
</body>
</html>
